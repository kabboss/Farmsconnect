<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FarmsConnect</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="img/FarmsConnect.jpg"> <!-- Chemin vers votre image -->
    <link rel="stylesheet" href="login.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.9.3/lottie.min.js"></script>
    <script type="text/javascript" src="cordova.js"></script>


</head>
<body>

    <header class="header-animated">
        <h2 class="Bienvenue">FarmsConnect Burkina</h2>
    </header>
    <br>

<script>
    // Fonction pour ouvrir un lien dans un nouvel onglet du navigateur
    window.openInBrowser = function (url) {
        try {
            console.log("Tentative d'ouverture du lien : " + url);
            window.open(url, "_blank"); // Ouvre le lien dans un nouvel onglet
        } catch (error) {
            console.error("Erreur lors de l'ouverture du lien :", error);
            alert("Impossible d'ouvrir le lien.");
        }
    };
</script>

<style>
    .message { font-size: 18px; color: #333; }
    .update-button { padding: 10px 20px; background-color: #28a745; color: white; border: none; cursor: pointer; }
    .error { color: red; font-size: 16px; }
</style>


  <script>
    // Fonction pour v√©rifier la mise √† jour
    async function checkForUpdate() {
      try {
        const response = await fetch('https://farmsconnect.netlify.app/get-update'); // URL de l'API
  
        if (!response.ok) throw new Error(`Erreur HTTP : ${response.status}`);
  
        const updateData = await response.json();
  
        const appMessage = document.getElementById('appMessage');
        const updateButton = document.getElementById('updateButton');
  
        // Affiche le message de mise √† jour
        appMessage.textContent = updateData.message;
        updateButton.style.display = 'block';
  
        // Redirige vers le lien de t√©l√©chargement
        updateButton.onclick = () => {
          window.location.href = updateData.downloadUrl;
        };
      } catch (err) {
        console.error("Erreur lors de la v√©rification de mise √† jour :", err);
        document.getElementById('errorMessage').textContent =
          "Impossible de v√©rifier les mises √† jour pour le moment.";
      }
    }
  
    // Appeler la fonction au chargement de la page
    checkForUpdate();
  </script>
  


<div id="splash-screen">
    <img src="img/FarmsConnect.jpg" alt="Logo" />
  </div>
  
  <script>
    // Apr√®s 5 secondes, masquer l'√©cran de d√©marrage
    setTimeout(function() {
      document.body.classList.add('splash-screen-hidden'); // Cache l'√©cran de d√©marrage
    }, 5000);
  </script>
  

<script>
    // Animation de la page de d√©marrage
    window.onload = function() {
        const splashScreen = document.getElementById('splash-screen');
        const mainContent = document.getElementById('main-content');

        // Animation du splash screen pour la transition
        gsap.to(splashScreen, { duration: 1, opacity: 0, display: "none" });
        gsap.to(mainContent, { duration: 1, delay: 1, opacity: 1, display: "block" });
    };

    // D√©marrer l'application
    document.getElementById('startButton').addEventListener('click', function() {
    });
</script>

<div class="home-container">
    <img src="img/FarmsConnect.jpg" alt="Bienvenue sur FarmsConnect" class="home-image">
</div>

<section class="button-container">
    <button id="show-login-btn">Se connecter</button>
    <button id="show-signup-btn">S'inscrire Gratuitement</button>
</section>



<!-- Modale de connexion -->

<div class="modal" id="login-modal">
    <div class="modal-content">
        <span class="close-btn" id="close-login-modal">&times;</span>
        <h2>Connexion</h2>
        <form id="login-form">
            <input type="text" id="login-username" placeholder="Nom d'utilisateur" required>
            <input type="email" id="login-email" placeholder="Email" required>
            <input type="text" id="login-contact" placeholder="Contact" required>
            <div style="position: relative;">
                <input type="password" id="login-password" placeholder="Mot de passe" required style="padding-right: 40px;">
                <span id="toggle-password" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer;">
                    üôà
                </span>
                
     </div>


 
            <!-- Message de patience avec animation -->
 <div id="loadingMessage" class="loading-message">
    <!-- Le spinner √† la place de l'image -->
    <div class="spinner"></div>
    <p id="loadingText">Connexion en cours...</p>
</div>
            <button  type="submit" id="loginButton" >Se connecter</button>
        <!-- Bouton "Continuer sans se connecter" avec redirection directe -->
        <button type="button" onclick="window.location.href='Location.html';" id="continue-without-login-btn">Continuer sans se connecter</button>

        </form>
    </div>
</div>



<script>

document.getElementById("toggle-password").addEventListener("click", function () {
    const passwordInput = document.getElementById("login-password");
    const currentType = passwordInput.getAttribute("type");

    if (currentType === "password") {
        passwordInput.setAttribute("type", "text");
        this.textContent = "üëÅÔ∏è"; // Ic√¥ne pour masquer
    } else {
        passwordInput.setAttribute("type", "password");
        this.textContent = "üôà"; // Ic√¥ne pour afficher
    }
});

</script>



<script>
window.onload = function() {
    // Afficher le message de chargement d√®s que la page est charg√©e
    var loadingMessage = document.getElementById('loadingMessage');
    loadingMessage.classList.remove('hidden');  // Afficher le message de chargement

    // Masquer le message de chargement apr√®s 5 secondes (5000 ms)
    setTimeout(function() {
        loadingMessage.classList.add('hidden');  // Cacher le message de chargement
    }, 3000);  // Temps en millisecondes
};

</script>








<!-- Modale d'inscription -->
<div class="modal" id="signup-modal">
    <div class="modal-content">
        <span class="close-btn" id="close-signup-modal">&times;</span>
        <h2>Cr√©er un compte</h2>
        <form id="signup-form">
            <input type="text" id="signup-username" name="username" placeholder="Nom d'utilisateur" required>
            <input type="email" id="signup-email" name="email" placeholder="Email" required>
            <input type="text" id="signup-contact" name="contact" placeholder="Contact" required>
            <div style="position: relative; display: inline-block;">
                <input type="password" id="signup-password" name="password" placeholder="Mot de passe" required style="padding-right: 40px;">
            </div>
            <select id="signup-userType" name="userType" required>
                <option value="" disabled selected>Type d'utilisateur</option>
                <option value="vendeur">Vendeur</option>
                <option value="visiteur">Visiteur</option>
                <option value="veterinaire">V√©t√©rinaire</option>
                <option value="eleveur">√âleveur</option>
            </select>
            <button type="button" id="continue-registration">Repondre au questions de FarmConnect</button>

            <button type="submit" id="loginButton" >S'inscrire</button> <!-- Changer en type="submit" -->
        </form>
    </div>
</div>


<script>
    // Ajouter dynamiquement une ic√¥ne pour basculer la visibilit√© du mot de passe
    const passwordField = document.getElementById('signup-password');
    const toggleButton = document.createElement('span');
    toggleButton.id = 'toggle-password';
    toggleButton.textContent = 'üôà';
    toggleButton.style.position = 'absolute';
    toggleButton.style.right = '10px';
    toggleButton.style.top = '50%';
    toggleButton.style.transform = 'translateY(-50%)';
    toggleButton.style.cursor = 'pointer';

    // Ajouter l'ic√¥ne √† c√¥t√© du champ de mot de passe
    passwordField.parentNode.style.position = 'relative'; // Assure que le conteneur est positionn√©
    passwordField.parentNode.appendChild(toggleButton);

    // Ajouter un √©couteur d'√©v√©nement pour basculer la visibilit√©
    toggleButton.addEventListener('click', function () {
        if (passwordField.type === 'password') {
            passwordField.type = 'text';
            toggleButton.textContent = 'üëÅÔ∏è'; // Ic√¥ne pour montrer
        } else {
            passwordField.type = 'password';
            toggleButton.textContent = 'üôà'; // Ic√¥ne pour masquer
        }
    });
</script>



<!-- Message de chargement pour l'inscription -->
<div id="signupLoadingMessage" class="hidden">
    <div class="spinner-container">
        <img src="img/FarmsConnect.jpg" alt="Chargement" class="spinner-image" />
        <div class="spinner"></div>
    </div>
    <p class="loading-text">Inscription en cours, veuillez patienter...</p>
</div>


<script>
    
</script>




<!-- Modale d'autorisation -->
<div class="modal" id="consent-modal">
    <div class="modal-content">
        <h2>Autorisation de collecte de donn√©es suppl√©mentaires</h2>
        <p>
            Dans le cadre de l'am√©lioration de notre plateforme et pour fournir des statistiques utiles aux d√©cideurs,
            nous collectons des informations suppl√©mentaires. Ces donn√©es resteront anonymes et seront utilis√©es √† des
            fins statistiques uniquement.
        </p>
        <p>Souhaitez-vous r√©pondre √† ces questions ?</p>
        <div>
            <button id="accept-consent">J'accepte</button>
            <button id="decline-consent">Non</button>
        </div>
    </div>
</div>

<!-- Questions suppl√©mentaires -->
<div class="modal" id="extra-questions-modal" style="display: none;">
    <div class="modal-content">
        <span class="close-button1" onclick="closeExtraModal()">√ó</span>
        <h2>Questions suppl√©mentaires</h2>
        <form id="extra-questions-form">
            <h3>Informations personnelles</h3>
            <label for="Nom_prenom">Nom & Pr√©nom </label>
            <input type="text" id="Nom_prenom" name="Nom_prenom"  required>
            
            <label for="Numero_telephone">Numero de telephone Principale</label>
            <input type="number" id="Numero_telephone" name="Numero_telephone"  required>

            <label for="Numero_telephone2">Numero de telephone Secondaire</label>
            <input type="number" id="Numero_telephone2" name="Numero_telephone2"  required>

            <label for="age">Quel est votre √¢ge ?</label>
            <input type="number" id="age" name="age"  required>
            
            <label for="region">Dans quelle r√©gion vivez-vous ?</label>
<select id="region" name="region" required onchange="toggleRegionInput(this)">
  <option value="">-- S√©lectionnez une r√©gion --</option>
  <option value="Boucle du Mouhoun">Boucle du Mouhoun</option>
  <option value="Cascades">Cascades</option>
  <option value="Centre">Centre</option>
  <option value="Centre-Est">Centre-Est</option>
  <option value="Centre-Nord">Centre-Nord</option>
  <option value="Centre-Ouest">Centre-Ouest</option>
  <option value="Centre-Sud">Centre-Sud</option>
  <option value="Est">Est</option>
  <option value="Hauts-Bassins">Hauts-Bassins</option>
  <option value="Nord">Nord</option>
  <option value="Plateau-Central">Plateau-Central</option>
  <option value="Sahel">Sahel</option>
  <option value="Sud-Ouest">Sud-Ouest</option>
</select>

            <label for="Localite">Quartier</label>
            <input type="text" id="Localite" name="Localite" placeholder=" Exemple : Nagrin , Bendogo , Karpala" required>

            <label for="sexe">Sexe :</label>
            <select id="sexe" name="sexe" required>
                <option value="" disabled selected>Choisissez</option>
                <option value="homme">Homme</option>
                <option value="femme">Femme</option>
            </select>

            <label for="education">Quel est votre niveau d'√©ducation ?</label>
            <select id="education" name="education">
                <option value="" disabled selected>Choisissez</option>
                <option value="aucun">Aucun</option>
                <option value="primaire">Primaire</option>
                <option value="secondaire">Secondaire</option>
                <option value="universitaire">Universitaire</option>
            </select>

            <h3>Informations sur l‚Äô√©levage</h3>
            <p>Quel type d'√©levage pratiquez-vous ? (vous pouvez choisir plusieurs options)</p>
            <div class="checkbox-group">
              <input type="checkbox" id="bovins" name="type_elevage" value="bovins" class="checkbox">
              <label for="bovins" class="checkbox-label">Bovins</label>
            
              <input type="checkbox" id="ovins" name="type_elevage" value="ovins" class="checkbox">
              <label for="ovins" class="checkbox-label">Ovins</label>
            
              <input type="checkbox" id="caprins" name="type_elevage" value="caprins" class="checkbox">
              <label for="caprins" class="checkbox-label">Caprins</label>
            
              <input type="checkbox" id="volaille" name="type_elevage" value="volaille" class="checkbox">
              <label for="volaille" class="checkbox-label">Volaille</label>
            
              <input type="checkbox" id="porcins" name="type_elevage" value="porcins" class="checkbox">
              <label for="porcins" class="checkbox-label">Porcins</label>

              <input type="checkbox" id="Aucun" name="type_elevage" value="Aucun" class="checkbox">
              <label for="Aucun" class="checkbox-label">Aucun</label>
            </div>
            
            <label for="nombre-animaux">Combien d‚Äôanimaux poss√©dez-vous ?</label>
            <input type="number" id="nombre-animaux" name="nombre_animaux" placeholder="Ex : 50" required>

            <label for="revenus-elevage">Quel pourcentage de vos revenus provient de l‚Äô√©levage ?</label>
            <select id="revenus-elevage" name="revenus_elevage" required>
                <option value="" disabled selected>Choisissez</option>
                <option value="moins-de-25%">Moins de 25%</option>
                <option value="25-50%">25% - 50%</option>
                <option value="50-75%">50% - 75%</option>
                <option value="plus-de-75%">Plus de 75%</option>
            </select>

            <label for="mode-alimentation">Comment nourrissez-vous vos animaux ?</label>
            <select id="mode-alimentation" name="mode_alimentation" required>
              <option value="" disabled selected>Choisissez</option>
              <option value="aliments-industriels">Aliments industriels</option>
              <option value="paturage">P√¢turage</option>
              <option value="mixte">Mixte (industriel et p√¢turage)</option>
              <option value="residus-agricoles">R√©sidus agricoles</option>
              <option value="autoproduction">Autoproduction (fourrage, cultures)</option>
              <option value="poules-liberte">Poules en libert√© (nourries naturellement)</option> <!-- Nouvelle option -->
              <option value="autres">Autres</option>
            </select>

            <label for="acces-eau">Vos animaux ont-ils un acc√®s r√©gulier √† l‚Äôeau ?</label>
            <select id="acces-eau" name="acces_eau" required>
                <option value="" disabled selected>Choisissez</option>
                <option value="oui">Oui</option>
                <option value="non">Non</option>
            </select>


            <h3>Probl√©matiques rencontr√©es</h3>
            <label for="principaux-defis" class="main-label">Quels sont vos principaux d√©fis dans l‚Äô√©levage ? (Cochez tout ce qui s'applique)</label>
            <div class="defis-group">
              <div class="defi-item">
                <input type="checkbox" id="sante-animaux" name="defis" value="sante-animaux" class="checkbox">
                <label for="sante-animaux" class="checkbox-label">Sant√© des animaux</label>
              </div>
              
              <div class="defi-item">
                <input type="checkbox" id="manque-eau" name="defis" value="manque-eau" class="checkbox">
                <label for="manque-eau" class="checkbox-label">Manque d'eau</label>
              </div>
              
              <div class="defi-item">
                <input type="checkbox" id="alimentation-animaux" name="defis" value="alimentation-animaux" class="checkbox">
                <label for="alimentation-animaux" class="checkbox-label">Alimentation des animaux</label>
              </div>
              
              <div class="defi-item">
                <input type="checkbox" id="acces-marche" name="defis" value="acces-marche" class="checkbox">
                <label for="acces-marche" class="checkbox-label">Acc√®s aux march√©s</label>
              </div>
              
              <div class="defi-item">
                <input type="checkbox" id="autres-defis" name="defis" value="autres" class="checkbox" onclick="toggleAutresInput()">
                <label for="autres-defis" class="checkbox-label">Autres</label>

                <input type="checkbox" id="Aucun" name="defis" value="Aucun" class="checkbox">
                <label for="Aucun" class="checkbox-label">Aucun</label>
  
              </div>
            </div>
            
            <!-- Champ texte pour l'option "Autres" -->
            <div id="autres-defis-input" class="other-input" style="display: none;">
              <label for="autres-text-defis">Pr√©cisez vos autres d√©fis :</label>
              <input type="text" id="autres-text-defis" name="autres_defis" class="text-input">
            </div>
             


            <script>
              // Afficher le champ texte si "Autres" est s√©lectionn√©
              const autresDefisCheckbox = document.getElementById("autres-defis");
              const autresDefisInput = document.getElementById("autres-defis-input");
            
              autresDefisCheckbox.addEventListener("change", function () {
                if (this.checked) {
                  autresDefisInput.style.display = "block";
                } else {
                  autresDefisInput.style.display = "none";
                }
              });




              function toggleAutresInput() {
  var autresDefisInput = document.getElementById('autres-defis-input');
  var autresCheckbox = document.getElementById('autres-defis');
  if (autresCheckbox.checked) {
    autresDefisInput.style.display = 'block';
  } else {
    autresDefisInput.style.display = 'none';
  }
}
            </script>
            

<h3>Financement et besoins</h3>
<label for="financement">Avez-vous acc√®s √† des financements pour votre activit√© ?</label>
<select id="financement" name="financement" required>
    <option value="" disabled selected>Choisissez</option>
    <option value="oui">Oui</option>
    <option value="non">Non</option>
</select>

<label for="besoin-financier">Si non, quels seraient vos besoins financiers ?</label>
<textarea id="besoin-financier" name="besoin_financier" placeholder="Ex : Cr√©dits, subventions, microfinance Ect...."></textarea>

<h3>Perspectives futures</h3>
<label for="plan-futur">Quels sont vos projets pour l‚Äôavenir de votre exploitation ?</label>
<textarea id="plan-futur" name="plan_futur" placeholder="Ex : Augmenter le cheptel, investir dans de nouvelles technologies Ect..."></textarea>


<h3>Technologies et innovations</h3>
<label for="utilisation-technologie">Utilisez-vous des technologies modernes dans votre exploitation ?</label>
<select id="utilisation-technologie" name="utilisation_technologie">
    <option value="" disabled selected>Choisissez</option>
    <option value="oui">Oui</option>
    <option value="non">Non</option>
</select>

<!-- Si oui, permettre de sp√©cifier -->
<div id="technologie-details" style="display:none;">
    <label for="technologie-details">Pr√©cisez les technologies utilis√©es :</label>
    <textarea id="technologies-utilisees" name="technologies_utilisees" placeholder="Ex : √âquipements modernes, syst√®mes de suivi num√©rique, etc."></textarea>
</div>

<h3>Acc√®s √† la formation</h3>
<label for="acces-formation">Avez-vous acc√®s √† des formations sur l'√©levage ?</label>
<select id="acces-formation" name="acces_formation">
    <option value="" disabled selected>Choisissez</option>
    <option value="oui">Oui</option>
    <option value="non">Non</option>
</select>

<!-- Si oui, permettre de sp√©cifier -->
<div id="formation-details" style="display:none;">
    <label for="formation-details">Quel type de formation avez-vous re√ßu ?</label>
    <textarea id="type-formation" name="type_formation" placeholder="Ex : Gestion d'√©levage, sant√© animale, techniques de production, etc."></textarea>
</div>


            <button type="button" id="submit-questions">Soumettre</button>
        </form>
    </div>
</div>

<script>
    function closeExtraModal() {
    document.getElementById("extra-questions-modal").style.display = "none";
}
</script>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Obtenir les √©l√©ments des modals
        const consentModal = document.getElementById("consent-modal");
        const signupModal = document.getElementById("signup-modal");
        const extraQuestionsModal = document.getElementById("extra-questions-modal"); // Modal de questions suppl√©mentaires

        // Obtenir les boutons de la modal de consentement
        const acceptConsentButton = document.getElementById("accept-consent");
        const declineConsentButton = document.getElementById("decline-consent");

        // Ouverture de la modale d'autorisation lors du clic sur "continue-registration"
        document.getElementById("continue-registration").addEventListener("click", function () {
            signupModal.style.display = "none";
            consentModal.style.display = "block";
        });

        // Gestion du consentement : acceptation du consentement
        acceptConsentButton.addEventListener("click", function () {
            consentModal.style.display = "none";
            extraQuestionsModal.style.display = "block";
        });

        // Gestion du consentement : refus du consentement
        declineConsentButton.addEventListener("click", function () {
            consentModal.style.display = "none";
        });

        // Lorsque l'utilisateur clique sur "Non" (refuser le consentement)
        declineConsentButton.addEventListener("click", function () {
            consentModal.style.display = "none";
            signupModal.style.display = "block";
        });

        // Soumission des questions suppl√©mentaires lorsque l'utilisateur clique sur "submit-questions"
        document.getElementById("submit-questions").addEventListener("click", function () {
            const extraQuestionsForm = document.getElementById("extra-questions-form");
            const formData = new FormData(extraQuestionsForm);

            // Convertir FormData en un objet JavaScript
            const formDataJson = {};

            formData.forEach((value, key) => {
                if (key === 'defis') {
                    if (!formDataJson[key]) {
                        formDataJson[key] = [];
                    }
                    formDataJson[key].push(value);
                } else {
                    formDataJson[key] = value;
                }
            });

            // Faire la requ√™te POST avec les donn√©es du formulaire
            fetch('https://farmsconnect.netlify.app/api/questions', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(formDataJson),
            })
            .then((response) => {
                if (response.ok) {
                    showAlert("Merci pour vos r√©ponses !");

                    // Masquer la modal des questions suppl√©mentaires
                    extraQuestionsModal.style.display = "none";

                    // Afficher la modal d'inscription apr√®s un d√©lai de 3 secondes
                    setTimeout(function() {
                        signupModal.style.display = "block";
                    }, 3000); // 3000 millisecondes = 3 secondes
                } else {
                    showAlert("Une erreur est survenue lors de la soumission des questions.");
                }
            })
            .catch((error) => {
                // Gestion des erreurs r√©seau
                console.error("Erreur r√©seau : ", error);
                showAlert("Une erreur r√©seau est survenue.");
            });
        });
    });
</script>



<script>

document.addEventListener("DOMContentLoaded", function() {
    // Cibler les boutons
    const showLoginBtn = document.getElementById('show-login-btn');
    const showSignupBtn = document.getElementById('show-signup-btn');
    
    const loginModal = document.getElementById('login-modal');
    const signupModal = document.getElementById('signup-modal');

    const closeLoginModal = document.getElementById('close-login-modal');
    const closeSignupModal = document.getElementById('close-signup-modal');

    // Afficher la modale de connexion
    showLoginBtn.addEventListener('click', function() {
        loginModal.style.display = 'flex';
        signupModal.style.display = 'none'; // Cacher la modale d'inscription
    });

    // Afficher la modale d'inscription
    showSignupBtn.addEventListener('click', function() {
        signupModal.style.display = 'flex';
        loginModal.style.display = 'none'; // Cacher la modale de connexion
    });

    // Fermer la modale de connexion
    closeLoginModal.addEventListener('click', function() {
        loginModal.style.display = 'none';
    });

    // Fermer la modale d'inscription
    closeSignupModal.addEventListener('click', function() {
        signupModal.style.display = 'none';
    });

    // Fermer les modales en cliquant en dehors de la bo√Æte de contenu
    window.addEventListener('click', function(event) {
        if (event.target === loginModal) {
            loginModal.style.display = 'none';
        } else if (event.target === signupModal) {
            signupModal.style.display = 'none';
        }
    });
});


</script>




 <!-- Bouton -->
 <div class="button-container1">
    <button class="open-modal-button" onclick="openModal()">En savoir plus sur FarmsConnect</button>
</div>

<div class="container">
    <p id="appMessage" class="message">Bienvenue sur FarmsConnect !</p>
    <button id="updateButton" class="update-button" style="display: none;">T√©l√©charger la mise √† jour</button>
    <p id="errorMessage" class="error" style="display: none;">Erreur lors de la r√©cup√©ration des donn√©es.</p>
</div>
<p>Utilisateurs de FarmConnect : <span id="view-count">0</span></p>

<script>
    // Fonction pour r√©cup√©rer le nombre de vues depuis le serveur
    async function getViewCount() {
        try {
            const response = await fetch('https://farmsconnect.netlify.app/api/views');
            const data = await response.json();
            document.getElementById('view-count').textContent = data.count;
        } catch (error) {
            console.error("Erreur de r√©cup√©ration du compteur de vues :", error);
        }
    }

    // Fonction pour mettre √† jour le compteur de vues
    async function updateViewCount() {
        try {
            const response = await fetch('https://farmsconnect.netlify.app/api/views', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            const data = await response.json();
            document.getElementById('view-count').textContent = data.count;
        } catch (error) {
            console.error("Erreur de mise √† jour du compteur de vues :", error);
        }
    }

    // Lorsque la page se charge, on met √† jour et r√©cup√®re le compteur
    window.onload = function () {
        updateViewCount();  // Incr√©mente le compteur chaque fois que la page est visit√©e
        getViewCount();     // R√©cup√®re et affiche le compteur actuel
    };
</script>




<!-- Fen√™tre modale -->
<div class="modal hidden" id="farmsConnectModal">
    <div class="modal-content">
        <span class="close-button1" onclick="closeModal()">√ó</span>
        <h2>Bienvenue sur <strong>FarmsConnect</strong> üêìüåç</h2>
        <p>
          <strong>La r√©volution num√©rique du march√© avicole au Burkina Faso‚ÄØ! üöÄ</strong>
        </p>
        <p>
          Que vous soyez <strong>consommateur</strong> üõí, <strong>√©leveur</strong> üë©‚Äçüåæ, ou <strong>vendeur</strong> üè™, 
          <strong>FarmsConnect</strong> est <strong>LA solution innovante</strong> qui transforme le commerce des produits avicoles. 
          Que vous poss√©diez <strong>2 poules</strong> üêî ou <strong>200 poules</strong> üêîüêîüêî, que vous recherchiez de la volaille vivante ou pr√™te √† cuire, 
          <strong>FarmsConnect</strong> vous connecte √† un r√©seau <strong>fiable</strong>, <strong>transparent</strong>, et <strong>accessible en un clic</strong> üñ±Ô∏è.
        </p>
        
        <h3>Pour les consommateurs üõí</h3>
        <ul>
          <li><strong>Commande en ligne facile et rapide</strong> üíª : Achetez vos produits avicoles depuis le confort de votre maison.</li>
          <li><strong>Tra√ßabilit√© garantie</strong> ‚úÖ : Des produits certifi√©s, directement issus des √©leveurs.</li>
          <li><strong>Livraison s√©curis√©e</strong> üöö : Recevez vos commandes en un temps record gr√¢ce √† notre service logistique fiable.</li>
        </ul>
        
        <h3>Pour les √©leveurs üë©‚Äçüåæ</h3>
        <ul>
          <li><strong>Acc√®s direct au march√©</strong> üîó : Vendez facilement vos produits sans interm√©diaire.</li>
          <li><strong>Fixez vos propres prix</strong> üí∞ : Gardez un contr√¥le total sur vos revenus et optimisez vos profits.</li>
          <li><strong>Outils de gestion et conseils pratiques</strong> üõ†Ô∏è : Am√©liorez votre production gr√¢ce √† des recommandations adapt√©es.</li>
        </ul>
        
        <h3>Pour les vendeurs üè™</h3>
        <ul>
          <li><strong>Produits certifi√©s FarmsConnect</strong> ü•á : Assurez-vous de la qualit√© et de la fiabilit√© de vos achats.</li>
          <li><strong>Achat simplifi√©</strong> üõçÔ∏è : Gagnez en efficacit√© dans la gestion de vos commandes et de vos stocks.</li>
          <li><strong>Partenariats durables</strong> ü§ù : Collaborez avec un r√©seau de confiance pour d√©velopper votre activit√©.</li>
        </ul>
        
        <p>
          <strong>Rejoignez la r√©volution FarmsConnect</strong> üåü et d√©couvrez comment nous transformons le secteur avicole au Burkina Faso. 
          Ensemble, nous construisons un avenir plus connect√© et prosp√®re pour tous‚ÄØ! üå±üêì
        </p>
    </div>
</div>

  
  <div class="container">
    <p id="appMessage" class="message"></p>
    <button id="updateButton" class="update-button" style="display: none;">T√©l√©charger une mise √† jour</button>
    <p id="errorMessage" class="error" style="display: none;"></p>
  </div>



<script>
    function openModal() {
    const modal = document.getElementById('farmsConnectModal');
    modal.classList.remove('hidden');
    modal.classList.add('visible');
}

function closeModal() {
    const modal = document.getElementById('farmsConnectModal');
    modal.classList.remove('visible');
    modal.classList.add('hidden');
}

</script>


 <div class="terms-container">
    <a href="conditiondutili.html" class="terms-button">Voir les conditions d'utilisation</a>
</div>


 <script>
    function openModal() {
    document.getElementById("farmsConnectModal").style.display = "flex";
}

function closeModal() {
    document.getElementById("farmsConnectModal").style.display = "none";
}

 </script>


<script>
    // Afficher les formulaires lors du clic sur "Connexion"
    document.getElementById('show-login').addEventListener('click', function(event) {
        event.preventDefault(); // Emp√™che le comportement par d√©faut du lien
        document.getElementById('form-container').style.display = 'flex'; // Affiche le formulaire
    });
</script>



<div class="alert hidden" id="customAlert">
    <div class="alert-content">
        <img src="img/FarmsConnect.jpg" alt="FarmsConnect Logo" class="alert-image">
        <p id="alertMessage"></p>
        <button class="alert-close-button" onclick="closeAlert()">√ó</button>
    </div>
</div>


<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Fonction g√©n√©rique pour afficher des alertes utilisateur
    function showAlert(message) {
    const alertBox = document.getElementById("customAlert");
    const alertMessage = document.getElementById("alertMessage");

    if (!alertBox || !alertMessage) {
        console.error("L'√©l√©ment d'alerte personnalis√© est introuvable.");
        return;
    }

    alertMessage.textContent = message; // D√©finit le message de l'alerte
    alertBox.classList.remove("hidden"); // Affiche l'alerte en retirant 'hidden'
    alertBox.classList.add("visible");  // Ajoute la classe 'visible' pour le style

    // Masquer automatiquement apr√®s 5 secondes
    setTimeout(() => {
        alertBox.classList.remove("visible");
        alertBox.classList.add("hidden");
    }, 5000);
}


// Gestion de l'inscription
document.getElementById("signup-form").addEventListener("submit", async function (event) {
    event.preventDefault();

    // Afficher le message de chargement
    showSignupLoadingMessage();

    try {
        // R√©cup√©ration des donn√©es du formulaire
        const username = document.getElementById("signup-username").value.trim();
        const email = document.getElementById("signup-email").value.trim();
        const contact = document.getElementById("signup-contact").value.trim();
        const password = document.getElementById("signup-password").value;
        const userType = document.getElementById("signup-userType").value;

        // Validation des champs
        if (!username || !email || !contact || !password || !userType) {
            hideSignupLoadingMessage();
            showAlert('Veuillez remplir tous les champs.');
            return;
        }

        // Envoi des donn√©es au serveur
        const response = await fetch('https://farmsconnect.netlify.app/api/signup', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ username, email, contact, password, userType }),
        });

        if (response.ok) {
            hideSignupLoadingMessage();
            showAlert('Inscription r√©ussie !');
            window.location.href = 'Location.html'; 


            document.getElementById("signup-modal").classList.remove("open");
            document.querySelectorAll('.modal').forEach(modal => modal.classList.remove('open'));
            // Si la connexion est r√©ussie, afficher la modale de connexion
            document.getElementById("login-modal").classList.add("open");
             // Masquer le modal d'inscription

        } else {
            const message = await response.text();
            hideSignupLoadingMessage();
            showAlert('Erreur lors de l\'inscription : ' + message);
        }
    } catch (error) {
        hideSignupLoadingMessage();
        showAlert('Erreur r√©seau : ' + error.message);
    }
});



// Afficher le message de chargement pour l'inscription
function showSignupLoadingMessage() {
    const loadingMessage = document.getElementById("signupLoadingMessage");
    if (loadingMessage) {
        loadingMessage.classList.remove("hidden");
    }
}

// Masquer le message de chargement pour l'inscription
function hideSignupLoadingMessage() {
    const loadingMessage = document.getElementById("signupLoadingMessage");
    if (loadingMessage) {
        loadingMessage.classList.add("hidden");
    }
}





    // V√©rifier si le param√®tre showLoginModal est pr√©sent dans l'URL
window.addEventListener('DOMContentLoaded', (event) => {
    const urlParams = new URLSearchParams(window.location.search);
    const showLoginModal = urlParams.get('showLoginModal');

    // Si le param√®tre est vrai, afficher la modale
    if (showLoginModal === 'true') {
        const modal = document.getElementById('login-modal');
        if (modal) {
            modal.style.display = 'block';  // Affiche la modale
        }
    }
});





    // Gestion de la connexion
    document.getElementById("login-form").addEventListener("submit", async function (event) {
    event.preventDefault();

    // R√©cup√©rer les valeurs des champs de formulaire
    const username = document.getElementById("login-username").value.trim();
    const email = document.getElementById("login-email").value.trim();
    const contact = document.getElementById("login-contact").value.trim();
    const password = document.getElementById("login-password").value;

    if (!username || !email || !contact || !password) {
        showAlert('Veuillez remplir tous les champs.');
        return;
    }

    // Afficher le message de patience
    document.getElementById('loadingMessage').style.display = 'flex';

    try {
        const response = await fetch('https://farmsconnect.netlify.app/api/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ username, email, contact, password }),
        });

        // Attendre 3 secondes avant de masquer le message de patience
        setTimeout(async () => {
            // Cacher le message de patience
            document.getElementById('loadingMessage').style.display = 'none';

            if (response.ok) {
                const data = await response.json();

                // Stocker les informations utilisateur
                localStorage.setItem('username', data.username);
                localStorage.setItem('email', data.email);
                localStorage.setItem('contact', data.contact);

                showAlert('Connexion r√©ussie !', 'success'); // Message de succ√®s
                setTimeout(() => {
                    window.location.href = 'Location.html'; // Redirection
                }, 2000); // Attends 2 secondes avant la redirection
            } else {
                const errorMessage = await response.text();
                showAlert('Erreur : ' + errorMessage, 'error'); // Message d'erreur
            }
        }, 3000); // Attendre 3 secondes avant de masquer le message de patience

    } catch (error) {
        showAlert('Erreur r√©seau : ' + error.message);
    }


    let failedAttempts = 0;
const MAX_ATTEMPTS = 3;

if (failedAttempts >= MAX_ATTEMPTS) {
    showAlert("Trop de tentatives √©chou√©es. Veuillez r√©essayer plus tard.");
    return;
}
failedAttempts++;



  });

});





function showAlert(message) {
    const alertBox = document.getElementById("customAlert");
    const alertMessage = document.getElementById("alertMessage");

    alertMessage.textContent = message;
    alertBox.classList.add("visible"); // Ajoute la classe pour afficher l'alerte

    // Masque automatiquement apr√®s 5 secondes
    setTimeout(() => closeAlert(), 10000);
}

function closeAlert() {
    const alertBox = document.getElementById("customAlert");
    alertBox.classList.remove("visible");
}

</script>





<script src="index.js"></script>




</body>
</html>
