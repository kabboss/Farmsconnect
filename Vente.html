<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vendre des Animaux - FarmsConnect</title>
    <link rel="icon" type="image/png" href="img/FarmsConnect.jpg"> <!-- Chemin vers votre image -->
    <link rel="stylesheet" href="style_Vente.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script type="text/javascript" src="cordova.js"></script>

</head>
<body>

    <header class="header">
        <div class="logo-container">
            <h2 class="logo">Vendre poulets</h2>
        </div>
        <nav class="nav">
            <input type="checkbox" id="menu-toggle" class="menu-toggle">
            <label for="menu-toggle" class="menu-icon">
                <span></span>
                <span></span>
                <span></span>
            </label>
            <ul class="nav-list">
            <li><a href="Acceuil.html">Accueil</a></li>
            <li><a href="Vente.html">Vendre</a></li>
            <li><a href="Visiteur.html">Visiter</a></li>
            <li><a href="Produit.html">Acheter Avec FarmsConnect</a></li>
            <li><a href="apropos.html">√Ä propos</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="Formations.html">Vid√©os Formation</a></li>
            </ul>
        </nav>
        <div class="image-container">
            <img src="img/FarmsConnect.jpg" alt="Farms Connect" class="header-image">
        </div>
    </header>



<!-- Spinner d'attente sophistiqu√© -->
<div class="spinner hidden" id="loadingSpinner">
    <div class="spinner-content">
        <img src="img/FarmsConnect.jpg" alt="Chargement" class="spinner-image" />
        <h1 class="spinner-title">Chargement en cours.....</h1>
        <div class="loader-line-container">
            <div class="loader-line"></div>
        </div>
    </div>
</div>


    <section class="form-section">
        <form id="vente-form">
            <div id="info-box" class="info-box highlight">
                <span>
                    N'oubliez pas de prendre des photos de vos produits 
                    <strong class="large-icon">üì∏</strong> avant de commencer √† remplir le formulaire !
                </span>
            </div>
        <br>

        <label for="username-vendeur">Nom d'utilisateur du vendeur* :</label>
        <input type="text" id="username-vendeur" name="username-vendeur" required placeholder="Ex: Nom Vendeur">

            <label for="categorie">Cat√©gorie* :</label>
            <select id="categorie" name="categorie">
                <option value="poulet-local">Poulet local</option>
                <option value="poulet-chair">Poulet de chair</option>
                <option value="poulet-ameliorer">Poulet Am√©lior√©</option>
                <option value="poule-pondeuse">Poule Pondeuse</option>
                <div class="invalid-feedback">Veuillez choisir une cat√©gorie.</div>
            </select>

            <label for="nombre">Nombre √† vendre * :</label>
            <input type="number" id="nombre" name="nombre" min="1" required>

            <label for="poids"> Poids approximatif par animal (en kg) <span style="font-style: italic; color: #888;">(Pas Obligatoire)</span>:</label>
            <input type="number" id="poids" name="poids" step="0.1">

            <label for="prix">Prix unitaire (en FCFA)* :</label>
            <input type="number" id="prix" name="prix" required>

            <label for="images">Ajouter une ou des images de vos/votre produit (s)  (max 3)* :</label>
            <input type="file" id="images" name="images" required accept="image/*" multiple>

            <label for="contact-principal">Contact principal* :</label>
            <input type="tel" id="contact-principal" name="contact-principal" required placeholder="Ex: +22670010101">
    
            <label for="contact-secondaire">Contact secondaire :</label>
            <input type="tel" id="contact-secondaire" name="contact-secondaire" placeholder="Ex: +22670010101">
    
            <span class="email-note">Veuillez entrer un e-mail valide et fonctionnel.</span>
            <label for="email-vendeur" class="important-label">E-mail* :</label>
            <input type="email" id="email-vendeur" name="email-vendeur" required>
            

  
 
<button type="submit" class="styled-button">Ajouter l'annonce</button>

    <button type="button" class="open-modal-button">Note Importante aux Vendeurs</button>

<!-- Fen√™tre modale -->
<!-- Fen√™tre modale -->
<div id="modal" class="modal hidden4">
    <div class="modal-content">
        <button class="close-button" onclick="closeModal()">Fermer</button> <!-- Nouveau bouton de fermeture -->
        <h2>Note Importante aux Vendeurs</h2>
        <p><strong>Chers vendeurs,</strong></p>
        <p>
            Nous vous remercions de faire partie de la communaut√© <strong>FarmsConnect</strong>. Voici des informations essentielles concernant la gestion des ventes et des certifications sur notre plateforme :
        </p>
        <ol style="padding-left: 20px;">
            <li>
                <strong>üìß Notification lors d'une commande</strong><br>
                Lorsqu‚Äôun client clique sur votre annonce pour acheter un produit, vous recevrez une notification par email üì©. Cette notification vous informera qu‚Äôune commande est en cours de traitement par FarmsConnect.
            </li>
            <li>
                <strong>‚úîÔ∏è Certification des produits</strong><br>
                FarmsConnect certifie vos produits avant de les livrer au client. Un v√©t√©rinaire ü©∫ de notre r√©seau inspectera les animaux pour garantir leur qualit√© et leur conformit√©.
            </li>
            <li>
                <strong>üöö Livraison au client</strong><br>
                Apr√®s la certification, FarmsConnect organisera la livraison directement au client. Vous n‚Äôaurez pas √† vous occuper de la logistique ou du transport, tout est pris en charge !
            </li>
            <li>
                <strong>üí∞ Commissions</strong><br>
                Une commission de <strong>4%</strong> sera appliqu√©e sur chaque vente effectu√©e sur la plateforme. Cette commission sera pr√©lev√©e sur le montant total de la transaction, y compris le prix de l‚Äôanimal et les √©ventuels frais suppl√©mentaires.
            </li>
            <li>
                <strong>üõµ Frais de livraison</strong><br>
                Des frais de livraison de <strong>500 FCFA</strong> seront appliqu√©s √† chaque commande, sauf si le client choisit l'option de retrait en personne üë§. Ces frais sont fix√©s par FarmsConnect et ind√©pendants du prix de l‚Äôanimal.
            </li>
        </ol>
        <p style="margin-top: 20px; color: #34495e;">
            ‚ö†Ô∏è <strong>Ce processus garantit la meilleure qualit√© pour vos produits et renforce la confiance des clients envers notre plateforme.</strong>
        </p>
        <p>Pour toute question ou assistance, n‚Äôh√©sitez pas √† contacter notre service support üìû. Nous sommes l√† pour vous aider !</p>
        <p class="signature" style="font-style: italic; text-align: right; margin-top: 30px;">
            Cordialement,<br>
            <em>L‚Äô√©quipe FarmsConnect </em>
        </p>    
    </div>
</div>
    


<script>
    // Gestion de la modale
    const openModalButton = document.querySelector('.open-modal-button');
    const modal = document.getElementById('modal');
    const closeButton = document.querySelector('.close-button');
    
    // Afficher la modale
    openModalButton?.addEventListener('click', (e) => {
        e.preventDefault();  // Emp√™che le comportement par d√©faut (soumission du formulaire)
        modal.classList.add('visible');  // Affiche la modale en ajoutant la classe 'visible'
    });
    
    // Fermer la modale
    closeButton?.addEventListener('click', () => {
        modal.classList.remove('visible');  // Cache la modale en enlevant la classe 'visible'
    });
    
    // Clic en dehors de la modale pour la fermer
    window.addEventListener('click', (event) => {
        if (event.target === modal) {
            modal.classList.remove('visible');  // Cache la modale si le clic est en dehors de celle-ci
        }
    });
    
    // Gestion des interactions de formulaire
    document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("vente-form");
        const spinner = document.getElementById("loadingSpinner");
        const alertBox = document.getElementById("customAlert");
        const alertMessage = document.getElementById("alertMessage");
    
        if (!alertBox) console.error("L'alerte 'customAlert' est introuvable !");
    
        // Afficher le spinner
        function showSpinner() {
            spinner.classList.remove("hidden");
        }
    
        // Masquer le spinner
        function hideSpinner() {
            spinner.classList.add("hidden");
        }
    
        // Afficher une alerte
        function showAlert(message, linkMessage = '') {
            alertMessage.innerHTML = message + ' ' + linkMessage;
            alertBox.classList.remove("hidden");
            alertBox.classList.add("visible");
        }
    
        // Fermer une alerte
        window.closeAlert = function () {
            alertBox.classList.add("hidden");
            alertBox.classList.remove("visible");
        };
    
        // Gestionnaire d'√©v√©nement pour le formulaire
        form.addEventListener("submit", async function (event) {
            event.preventDefault(); // Emp√™che l'envoi par d√©faut du formulaire
    
            const emailVendeur = document.getElementById('email-vendeur').value;
            const contactPrincipal = document.getElementById('contact-principal').value;
    
            showSpinner(); // Affiche le spinner
    
            try {
                // V√©rification des annonces existantes
                const response = await fetch(`https://farmsconnect.netlify.app/.netlify/functions/annonces/count?vendeur=${emailVendeur}&contact=${contactPrincipal}`);
                const data = await response.json();
    
                if (data.annoncesCount >= 3) {
                    hideSpinner();
                    showAlert("Vous ne pouvez publier que 3 annonces au maximum.");
                    return;
                }
    
                // Si tout est correct
                hideSpinner();
                showAlert("Veuillez patientez! Ne touchez √† rien si l'annonce n'est pas envoy√©e.");
    
                // Afficher le message de succ√®s avec un lien
                const successMessage = 'Annonce envoy√©e avec succ√®s! üòÄ ';
                const linkMessage = '<a href="https://farmsconnect.netlify.app/visiteur" class="alert-link">Voir mon annonce</a>';
                showAlert(successMessage, linkMessage);
    
            } catch (error) {
                console.error("Erreur :", error);
                hideSpinner();
                showAlert("Une erreur est survenue. Veuillez r√©essayer.");
            }
        });
    });
    </script>
            </form>
    </section>
    
    

    <script src="script_Vente.js"></script>

    <div class="alert hidden" id="customAlert">
        <div class="alert-content">
            <img src="img/FarmsConnect.jpg" alt="FarmsConnect Logo" class="alert-image">
            <p id="alertMessage"></p>
            <button class="alert-close-button" onclick="closeAlert()">√ó</button>
        </div>
    </div>
    
</body>
</html>
